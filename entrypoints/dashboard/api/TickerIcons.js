import localForage from "localforage"
export async function getTickerIcons(ticker) {
    const cacheResponse = await localForage.getItem(`tickerIcons:${ticker}`)
    if (cacheResponse) {
        return JSON.parse(cacheResponse)
    }
    try {
        const resp = await fetch(`https://www.onlinekhabar.com/smtm/ticker-page/ticker-info/${ticker}`)
        const data = await resp.json()
        const response = {
            imageUrl: data.response.icon,
            tickerName: data.response.ticker_name
        }
        await localForage.setItem(`tickerIcons:${ticker}`, JSON.stringify(response))
        return response
    } catch(err) {
        const response = {
            imageUrl: `data:image/png;base64,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`
        }
        await localForage.setItem(`tickerIcons:${ticker}`, JSON.stringify(response))
        return response
    }
}